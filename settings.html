<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="UTF-8" />
    <title>设置中心</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1.0, user-scalable=no, viewport-fit=cover" />
    
    <meta name="mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-title" content="设置中心" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
    <meta name="theme-color" content="#ffffff" />
    <link rel="manifest" href="manifest.webmanifest" />
    <link rel="stylesheet" href="assets/styles.css" />
    <link rel="icon" type="image/png" sizes="192x192" href="icon/icon-192.png" />
    <link rel="icon" type="image/png" sizes="512x512" href="icon/icon-512.png" />
    <link rel="apple-touch-icon" sizes="192x192" href="icon/icon-192.png" />
    <link rel="apple-touch-icon" sizes="512x512" href="icon/icon-512.png" />
    <script src="assets/settings.js" defer></script>
    <script src="assets/pwa.js" defer></script>
  </head>
  <body class="bg-page settings-page">
    <div class="wrap">
      <header class="topbar mb-4">
        <div class="topbar-left">
          <div class="logo-dot"></div>
          <div class="ml-2">
            <div class="text-sm font-semibold">设置中心</div>
            <div class="text-xs text-gray-500">样式与显示</div>
          </div>
        </div>
        <button
          class="function-btn ghost text-xs"
          onclick="window.location.href='title.html'"
        >
          ← 返回标题页
        </button>
        <div class="topbar-right">
          <span id="currentUserName" class="user-badge text-xs"></span>
          <button id="btnLogout" class="function-btn ghost text-xs btn-compact">退出</button>
          <button id="btnLoginHeader" class="function-btn ghost text-xs hidden">登陆</button>
        </div>
      </header>

      <main class="layout flex-col gap-3">
        <section class="panel">
          <div class="flex items-center justify-between mb-3 flex-wrap gap-2">
            <h2 class="text-base font-semibold">场景管理</h2>
            <div class="flex items-center gap-2 w-full md:w-auto">
              <input
                id="newSceneInput"
                class="field-input flex-1"
                placeholder="新增场景，如 夜景、烟花"
              />
              <button id="btnAddScene" class="function-btn">新增</button>
            </div>
          </div>
          <div id="sceneList" class="grid gap-2 md:grid-cols-2"></div>
          <div class="text-xs text-gray-500 mt-2">
            配置后会同步到标题页筛选下拉，支持修改、删除与新增。
          </div>
        </section>

        <section class="panel">
          <div class="flex items-center justify-between mb-3 flex-wrap gap-2">
            <h2 class="text-base font-semibold">主题与显示</h2>
            <div>
              <div class="text-xs text-gray-500">即时保存 · 本地生效</div>
            </div>
          </div>

          <div class="grid gap-3 md:grid-cols-2">
            <div class="panel">
              <div class="field-label">顶部标题文字</div>
              <input
                id="titleTextInput"
                class="field-input"
                placeholder="标题与文案管理系统"
              />
              <div class="field-label mt-3">标题颜色</div>
              <input id="titleColorInput" class="field-input" type="color" />
              <div class="text-xs text-gray-500 mt-2">
                影响标题页顶部"标题与文案管理系统"的文字与颜色。
              </div>
              <div
                id="titlePreview"
                class="mt-3 text-sm font-semibold"
                style="color: var(--topbar-title-color);"
              ></div>
            </div>

            <div class="panel">
              <div class="grid gap-3 grid-cols-3">
                <div>
                  <div class="field-label">主按钮颜色</div>
                  <input id="brandColorInput" class="field-input" type="color" />
                </div>
                <div>
                  <div class="field-label">主按钮悬停</div>
                  <input
                    id="brandHoverInput"
                    class="field-input"
                    type="color"
                  />
                </div>
                <div>
                  <div class="field-label">幽灵按钮底色</div>
                  <input id="ghostColorInput" class="field-input" type="color" />
                </div>
                <div>
                  <div class="field-label">幽灵按钮悬停</div>
                  <input
                    id="ghostHoverInput"
                    class="field-input"
                    type="color"
                  />
                </div>
                <div>
                  <div class="field-label">隔行颜色</div>
                  <input id="stripeColorInput" class="field-input" type="color" />
                </div>
                <div>
                  <div class="field-label">列表悬停颜色</div>
                  <input id="hoverColorInput" class="field-input" type="color" />
                </div>
              </div>
              <div class="text-xs text-gray-500 mt-3">
                以上颜色将应用到标题页的按钮、隔行背景以及分类列表悬停效果。
              </div>
            </div>
          </div>
        </section>

        <section class="panel flex items-center justify-between flex-wrap gap-2">
          <div>
            <div class="text-base font-semibold">其它</div>
            <div class="text-xs text-gray-500">
              当前设置存储在本地浏览器，可随时恢复默认。
            </div>
          </div>
          <div class="flex gap-2 flex-wrap">
            <button id="btnExportSettings" class="function-btn ghost" type="button">导出设置</button>
            <button id="btnImportSettings" class="function-btn ghost" type="button">导入设置</button>
            <button
              id="btnResetSettings"
              class="function-btn ghost"
              type="button"
            >
              恢复默认
            </button>
            <button
              class="function-btn"
              type="button"
              onclick="window.location.href='title.html'"
            >
              返回标题页
            </button>
          </div>
        </section>
      </main>

      <div id="settingsToast" class="toast hidden"></div>
      <input id="settingsFileInput" type="file" accept="application/json" class="hidden" />
    </div>
  </body>
</html>
